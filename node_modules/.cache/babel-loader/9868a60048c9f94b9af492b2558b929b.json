{"ast":null,"code":"import * as actionsTypes from './actionsTypes';\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case actionsTypes.PLAYER_CHOICE:\n      {\n        console.log(action.payload);\n        return { ...state,\n          playerChoice: action.payload\n        };\n      }\n\n    case actionsTypes.MACHINE_CHOICE:\n      {\n        const choice = Math.floor(Math.random() * 3);\n        console.log('entrei no choice: ' + choice);\n\n        switch (choice) {\n          case 0:\n            return { ...state,\n              machineChoice: 'paper'\n            };\n\n          case 1:\n            return { ...state,\n              machineChoice: 'scissor'\n            };\n\n          case 2:\n            return { ...state,\n              machineChoice: 'rock'\n            };\n\n          default:\n            return { ...state\n            };\n        }\n      }\n\n    case actionsTypes.GAME_RESULT:\n      {\n        const playerChose = state.playerChoice;\n        const machineChose = state.machineChoice;\n        let currentScore = state.score;\n\n        if (playerChose === 'paper' && machineChose === 'rock') {\n          const newScore = ++currentScore;\n          localStorage.setItem('score', newScore);\n          return { ...state,\n            result: 'W',\n            score: newScore\n          };\n        } else if (playerChose === 'rock' && machineChose === 'scissor') {\n          const newScore = ++currentScore;\n          localStorage.setItem('score', newScore);\n          return { ...state,\n            result: 'W',\n            score: newScore\n          };\n        } else if (playerChose === 'scissor' && machineChose === 'paper') {\n          const newScore = ++currentScore;\n          localStorage.setItem('score', newScore);\n          return { ...state,\n            result: 'W',\n            score: newScore\n          };\n        } else if (playerChose == machineChose) {\n          localStorage.setItem('score', currentScore);\n          return { ...state,\n            result: 'T',\n            score: currentScore\n          };\n        } else {\n          const newScore = --currentScore;\n\n          if (newScore === 0 || newScore < 0) {\n            localStorage.setItem('score', 0);\n            return { ...state,\n              result: 'L',\n              score: 0\n            };\n          }\n\n          localStorage.setItem('score', newScore);\n          return { ...state,\n            result: 'L',\n            score: newScore\n          };\n        }\n      }\n\n    case actionsTypes.PLAY_AGAIN:\n      {\n        return { ...state,\n          playerChoice: false,\n          machineChoice: false,\n          result: ''\n        };\n      }\n\n    case actionsTypes.GET_PREVIOUS_SCORE:\n      {\n        const SavedScore = localStorage.getItem('score');\n\n        if (SavedScore === null) {\n          localStorage.setItem('score', 0);\n          return { ...state,\n            score: 0\n          };\n        }\n\n        return { ...state,\n          score: SavedScore\n        };\n      }\n\n    default:\n      return { ...state\n      };\n  }\n};","map":{"version":3,"names":["actionsTypes","reducer","state","action","type","PLAYER_CHOICE","console","log","payload","playerChoice","MACHINE_CHOICE","choice","Math","floor","random","machineChoice","GAME_RESULT","playerChose","machineChose","currentScore","score","newScore","localStorage","setItem","result","PLAY_AGAIN","GET_PREVIOUS_SCORE","SavedScore","getItem"],"sources":["C:/Users/erras/OneDrive/Рабочий стол/rock-paper-scissors-react-app/src/contexts/AppContext/reducer.js"],"sourcesContent":["import * as actionsTypes from './actionsTypes';\n\nexport const reducer = (state, action) => {\n  switch (action.type) {\n    case actionsTypes.PLAYER_CHOICE: {\n      console.log(action.payload);\n      return { ...state, playerChoice: action.payload };\n    }\n    case actionsTypes.MACHINE_CHOICE: {\n      const choice = Math.floor(Math.random() * 3);\n      console.log('entrei no choice: ' + choice);\n      switch (choice) {\n        case 0:\n          return { ...state, machineChoice: 'paper' };\n\n        case 1:\n          return { ...state, machineChoice: 'scissor' };\n\n        case 2:\n          return { ...state, machineChoice: 'rock' };\n\n        default:\n          return { ...state };\n      }\n    }\n    case actionsTypes.GAME_RESULT: {\n      const playerChose = state.playerChoice;\n      const machineChose = state.machineChoice;\n      let currentScore = state.score;\n\n      if (playerChose === 'paper' && machineChose === 'rock') {\n        const newScore = ++currentScore;\n        localStorage.setItem('score', newScore);\n        return { ...state, result: 'W', score: newScore };\n      } else if (playerChose === 'rock' && machineChose === 'scissor') {\n        const newScore = ++currentScore;\n        localStorage.setItem('score', newScore);\n        return { ...state, result: 'W', score: newScore };\n      } else if (playerChose === 'scissor' && machineChose === 'paper') {\n        const newScore = ++currentScore;\n        localStorage.setItem('score', newScore);\n        return { ...state, result: 'W', score: newScore };\n      } else if (playerChose == machineChose) {\n        localStorage.setItem('score', currentScore);\n        return { ...state, result: 'T', score: currentScore };\n      } else {\n        const newScore = --currentScore;\n\n        if (newScore === 0 || newScore < 0) {\n          localStorage.setItem('score', 0);\n          return { ...state, result: 'L', score: 0 };\n        }\n        localStorage.setItem('score', newScore);\n        return { ...state, result: 'L', score: newScore };\n      }\n    }\n\n    case actionsTypes.PLAY_AGAIN: {\n      return { ...state, playerChoice: false, machineChoice: false, result: '' };\n    }\n\n    case actionsTypes.GET_PREVIOUS_SCORE: {\n      const SavedScore = localStorage.getItem('score');\n\n      if (SavedScore === null) {\n        localStorage.setItem('score', 0);\n        return { ...state, score: 0 };\n      }\n\n      return { ...state, score: SavedScore };\n    }\n\n    default:\n      return { ...state };\n  }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}